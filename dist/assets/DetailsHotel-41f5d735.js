import{e as h,_ as p,H as v,r as f,o as i,c as n,a as t,t as e,F as c,f as r,b as y,d as H,w as u,g as d}from"./index-52c39809.js";const m={createAssing:a=>h.post("https://us-central1-matig2.cloudfunctions.net/decamero_back/api/newAssignment",a),getAssingByHotel:a=>(console.log("id_hotel",a),h.post("https://us-central1-matig2.cloudfunctions.net/decamero_back/api/assignments",{fk_hotel:a}))},w={data(){return{rows:[],dataHotel:[],assingHotel:[],data_assing:{type_room:"",type_accommodation:"",fk_hotel:""},selected_habitacion:"",selected_acomodacion:"",tiposHabitacion:[{name:"estandar"},{name:"junior"},{name:"suite"}],tiposAcomodacion:[],capacityHotel:""}},mounted(){this.get_hotel(),this.get_assing_by_hotel()},methods:{async get_hotel(){try{this.dataHotel=JSON.parse(localStorage.getItem("hotel")),this.hotelId=await v.getHotelById(this.dataHotel.id),localStorage.setItem("hotel",JSON.stringify(this.hotelId)),this.dataHotel=JSON.parse(localStorage.getItem("hotel"))}catch(a){alert(a)}},validateTypeHab(){this.selected_habitacion=="estandar"&&(this.tiposAcomodacion=[{name:"sencilla"},{name:"doble"}]),this.selected_habitacion=="junior"&&(this.tiposAcomodacion=[{name:"triple"},{name:"cuadruple"}]),this.selected_habitacion=="suite"&&(this.tiposAcomodacion=[{name:"sencilla"},{name:"doble"},{name:"triple"}])},async create_new_assing(){if(this.capacityHotel=this.dataHotel.ava_estandar+this.dataHotel.ava_junior+this.dataHotel.ava_suite,this.capacityHotel==0)Swal.fire({icon:"warning",text:"el hotel esta en su maxima capacidad , intenta con otro hotel"});else{if(this.data_assing.type_room=="estandar"&&this.dataHotel.ava_estandar==0){Swal.fire({icon:"warning",text:"ya no tienes mas habitaciones tipo estandar libres"});return}if(this.data_assing.type_room=="junior"&&this.dataHotel.ava_junior==0){Swal.fire({icon:"warning",text:"ya no tienes mas habitaciones tipo junior libres"});return}if(this.data_assing.type_room=="suite"&&this.dataHotel.ava_suite==0){Swal.fire({icon:"warning",text:"ya no tienes mas habitaciones tipo suite libres"});return}this.data_assing.fk_hotel=this.dataHotel.id,this.data_assing.type_room=this.selected_habitacion;try{const a=await m.createAssing(this.data_assing);console.log(a),Swal.fire({icon:"success",text:"Asignacion creada con Exito"}),await this.get_assing_by_hotel(),await this.get_hotel()}catch(a){alert(a)}}},async get_assing_by_hotel(){try{this.assingHotel=await m.getAssingByHotel(this.dataHotel.id)}catch(a){console.log("ASSIGN",a)}}}},S={class:"row"},A={class:"col-10 offset-1 mt-3"},k={class:"alert alert-primary text-center",role:"alert"},x={class:"row"},N={class:"col-10 offset-1"},C={class:"row"},D={class:"col-6"},B=t("label",{class:"col-sm-2 col-form-label"},[t("strong",null,"Nombre")],-1),j={class:"form-control"},I=t("label",{class:"col-sm-2 col-form-label"},[t("strong",null,"Ciudad")],-1),T={class:"form-control"},E=t("label",{class:"col-sm-3 col-form-label"},[t("strong",null,"N° Habitaciones")],-1),J={class:"form-control"},O={class:"col-6"},V=t("label",{class:"col-sm-2 col-form-label"},[t("strong",null,"Direccion")],-1),R={class:"form-control"},U=t("label",{class:"col-sm-2 col-form-label"},[t("strong",null,"Nit")],-1),F={class:"form-control"},G={class:"col-10 offset-1 mt-3"},L={class:"table table-bordered border-secondary"},M=t("thead",null,[t("tr",null,[t("th",{scope:"col"},[t("strong",null,"Cantidad")]),t("th",{scope:"col"},[t("strong",null,"Tipo Habitacion")])])],-1),q=t("td",null,"ESTANDAR",-1),z=t("td",null,"JUNIOR",-1),K=t("td",null,"ESTANDAR",-1),P=t("div",{class:"col-10 offset-1 marginDiv"},[t("button",{type:"button",class:"btn btn-info","data-bs-toggle":"modal","data-bs-target":"#staticBackdrop"}," Asignar Habitacion ")],-1),Q=t("div",{class:"col-10 offset-1 marginDiv"},[t("h1",{class:"text-center"},"Asignaciones Activas")],-1),W={class:"col-10 offset-1"},X={class:"table table-bordered border-secondary"},Y=t("thead",null,[t("tr",null,[t("th",{scope:"col"},[t("strong",null,"Cantidad")]),t("th",{scope:"col"},[t("strong",null,"Tipo Habitación")]),t("th",{scope:"col"},[t("strong",null,"Acomodación")])])],-1),Z={class:"row"},$={class:"col-10 offset-1 marginDiv"},tt=t("h1",{class:"text-center"},"Habitaciones Disponibles",-1),ot={class:"table table-bordered border-secondary"},st=t("thead",null,[t("tr",null,[t("th",{scope:"col"},[t("strong",null,"Estandar")]),t("th",{scope:"col"},[t("strong",null,"Junior")]),t("th",{scope:"col"},[t("strong",null,"Suite ")])])],-1),et={class:"row"},at={class:"col-10 offset-1"},lt=t("button",{type:"button",class:"btn btn-info"},"Home",-1),it={class:"row"},nt={class:"col-12"},ct={class:"modal fade",id:"staticBackdrop","data-bs-backdrop":"static","data-bs-keyboard":"false",tabindex:"-1","aria-labelledby":"staticBackdropLabel","aria-hidden":"true"},dt={class:"modal-dialog modal-dialog modal-lg"},rt={class:"modal-content"},_t=t("div",{class:"modal-header"},[t("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})],-1),ht={class:"modal-body"},ut={class:"row"},mt=t("div",{class:"col-2"},[t("label",null,"Cantidad"),t("label",{class:"form-control"},"1")],-1),bt={class:"col-5"},gt=t("label",null,"Tipo de Habitacion",-1),pt=t("option",{disabled:"",value:""}," Seleccione el tipo de habitacion ",-1),vt=["value"],ft={class:"col-5"},yt=t("label",null,"Tipo de acomodacion",-1),Ht=t("option",{disabled:"",value:""}," Seleccione el tipo de acomodacion ",-1),wt=["value"],St={class:"modal-footer"};function At(a,l,kt,xt,s,_){const b=f("router-link");return i(),n(c,null,[t("div",S,[t("div",A,[t("div",k,[t("h3",null,"Hotel "+e(s.dataHotel.name),1)])])]),t("div",x,[t("div",N,[t("div",C,[t("div",D,[t("div",null,[B,t("label",j,e(s.dataHotel.name),1)]),t("div",null,[I,t("label",T,e(s.dataHotel.city),1)]),t("div",null,[E,t("label",J,e(s.dataHotel.capacity),1)])]),t("div",O,[t("div",null,[V,t("label",R,e(s.dataHotel.address),1)]),t("div",null,[U,t("label",F,e(s.dataHotel.nit),1)])])])]),t("div",G,[t("table",L,[M,t("tbody",null,[t("tr",null,[t("td",null,e(s.dataHotel.estandar),1),q]),t("tr",null,[t("td",null,e(s.dataHotel.junior),1),z]),t("tr",null,[t("td",null,e(s.dataHotel.suite),1),K])])])]),P,Q,t("div",W,[t("table",X,[Y,t("tbody",null,[(i(!0),n(c,null,r(s.assingHotel,(o,g)=>(i(),n("tr",{key:g},[t("td",null,e(o.cantidad),1),t("td",null,e(o.type_room),1),t("td",null,e(o.type_accommodation),1)]))),128))])])])]),t("div",Z,[t("div",$,[tt,t("table",ot,[st,t("tbody",null,[t("tr",null,[t("td",null,e(this.dataHotel.ava_estandar),1),t("td",null,e(this.dataHotel.ava_junior),1),t("td",null,e(this.dataHotel.ava_suite),1)])])])])]),t("div",et,[t("div",at,[y(b,{to:"/"},{default:H(()=>[lt]),_:1})])]),t("div",it,[t("div",nt,[t("div",ct,[t("div",dt,[t("div",rt,[_t,t("div",ht,[t("div",ut,[mt,t("div",bt,[gt,u(t("select",{"onUpdate:modelValue":[l[0]||(l[0]=o=>s.selected_habitacion=o),l[1]||(l[1]=o=>s.data_assing.type_room=o)],onChange:l[2]||(l[2]=o=>_.validateTypeHab())},[pt,(i(!0),n(c,null,r(s.tiposHabitacion,o=>(i(),n("option",{value:o.name,key:o.name},e(o.name),9,vt))),128))],544),[[d,s.selected_habitacion],[d,s.data_assing.type_room,void 0,{trim:!0}]])]),t("div",ft,[yt,u(t("select",{"onUpdate:modelValue":[l[3]||(l[3]=o=>s.selected_acomodacion=o),l[4]||(l[4]=o=>s.data_assing.type_accommodation=o)]},[Ht,(i(!0),n(c,null,r(s.tiposAcomodacion,o=>(i(),n("option",{value:o.name,key:o.name},e(o.name),9,wt))),128))],512),[[d,s.selected_acomodacion],[d,s.data_assing.type_accommodation,void 0,{trim:!0}]])])])]),t("div",St,[t("button",{type:"button",class:"btn btn-primary",onClick:l[5]||(l[5]=o=>_.create_new_assing())}," Guardar ")])])])])])])],64)}const Ct=p(w,[["render",At]]);export{Ct as default};
